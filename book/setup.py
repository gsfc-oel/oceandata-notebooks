# /// script
# requires-python = ">=3.9"
# dependencies = [
#     "aiobotocore==2.15.1",
#     "aiohappyeyeballs==2.4.3",
#     "aiohttp==3.10.8",
#     "aioitertools==0.12.0",
#     "aiosignal==1.3.1",
#     "appnope==0.1.4",
#     "asttokens==2.4.1",
#     "attrs==24.2.0",
#     "bash-kernel==0.9.3",
#     "bleach==6.1.0",
#     "bokeh==3.6.0",
#     "botocore==1.35.23",
#     "bounded-pool-executor==0.0.3",
#     "cartopy==0.23.0",
#     "certifi==2024.8.30",
#     "cftime==1.6.4",
#     "charset-normalizer==3.3.2",
#     "click==8.1.7",
#     "cloudpickle==3.0.0",
#     "cmocean==4.0.3",
#     "colorcet==3.1.0",
#     "comm==0.2.2",
#     "contourpy==1.3.0",
#     "cycler==0.12.1",
#     "dask==2024.9.1",
#     "debugpy==1.8.6",
#     "decorator==5.1.1",
#     "distributed==2024.9.1",
#     "earthaccess==0.11.0",
#     "executing==2.1.0",
#     "fonttools==4.54.1",
#     "frozenlist==1.4.1",
#     "fsspec==2024.9.0",
#     "h5netcdf==1.3.0",
#     "h5py==3.12.1",
#     "holoviews==1.19.1",
#     "hvplot==0.11.0",
#     "idna==3.10",
#     "importlib-resources==6.4.5",
#     "ipykernel==6.29.5",
#     "ipython==8.28.0",
#     "ipywidgets==8.1.5",
#     "jedi==0.19.1",
#     "jinja2==3.1.4",
#     "jmespath==1.0.1",
#     "jupyter-client==8.6.3",
#     "jupyter-core==5.7.2",
#     "jupyterlab-widgets==3.0.13",
#     "kiwisolver==1.4.7",
#     "linkify-it-py==2.0.3",
#     "llvmlite==0.43.0",
#     "locket==1.0.0",
#     "markdown-it-py==3.0.0",
#     "markdown==3.7",
#     "markupsafe==2.1.5",
#     "matplotlib-inline==0.1.7",
#     "matplotlib==3.9.2",
#     "mdit-py-plugins==0.4.2",
#     "mdurl==0.1.2",
#     "msgpack==1.1.0",
#     "multidict==6.1.0",
#     "multimethod==1.12",
#     "nest-asyncio==1.6.0",
#     "netcdf4==1.7.1.post2",
#     "numba==0.60.0",
#     "numpy==2.0.2",
#     "packaging==24.1",
#     "pandas==2.2.3",
#     "panel==1.5.2",
#     "param==2.1.1",
#     "parso==0.8.4",
#     "partd==1.4.2",
#     "pexpect==4.9.0",
#     "pillow==10.4.0",
#     "platformdirs==4.3.6",
#     "pqdm==0.2.0",
#     "prompt-toolkit==3.0.48",
#     "psutil==6.0.0",
#     "ptyprocess==0.7.0",
#     "pure-eval==0.2.3",
#     "pvlib==0.11.1",
#     "pygments==2.18.0",
#     "pyparsing==3.1.4",
#     "pyproj==3.7.0",
#     "pyshp==2.3.1",
#     "python-cmr==0.13.0",
#     "python-dateutil==2.9.0.post0",
#     "pytz==2024.2",
#     "pyviz-comms==3.0.3",
#     "pyyaml==6.0.2",
#     "pyzmq==26.2.0",
#     "requests==2.32.3",
#     "s3fs==2024.9.0",
#     "scipy==1.14.1",
#     "seaborn==0.13.2",
#     "shapely==2.0.6",
#     "six==1.16.0",
#     "sortedcontainers==2.4.0",
#     "stack-data==0.6.3",
#     "tblib==3.0.0",
#     "tinynetrc==1.3.1",
#     "toolz==0.12.1",
#     "tornado==6.4.1",
#     "tqdm==4.66.5",
#     "traitlets==5.14.3",
#     "typing-extensions==4.12.2",
#     "tzdata==2024.2",
#     "uc-micro-py==1.0.3",
#     "urllib3==2.2.3",
#     "wcwidth==0.2.13",
#     "webencodings==0.5.1",
#     "widgetsnbextension==4.0.13",
#     "wrapt==1.16.0",
#     "xarray==2024.9.0",
#     "xyzservices==2024.9.0",
#     "yarl==1.13.1",
#     "zict==3.0.0",
# ]
# ///
from argparse import ArgumentParser

import bash_kernel.install
from ipykernel import kernelspec

if __name__ == "__main__":
    # install an ipython kernel
    app = kernelspec.InstallIPythonKernelSpecApp()
    app.initialize()
    app.start()
    argv = app.argv
    # install a bash kernel, from a subset of the same arguments
    parser = ArgumentParser()
    parser.add_argument("--user", action="store_true")
    parser.add_argument("--prefix", action="store_true")
    parser.add_argument("--sys-prefix")
    _, unknown = parser.parse_known_args(argv)
    argv = [i for i in argv if i not in unknown]
    bash_kernel.install.main(argv)
